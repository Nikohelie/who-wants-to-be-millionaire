{"ast":null,"code":"export const selectAnswers = state => {\n  const question = state.currentQuestionRetrieval.data;\n  const answerValidation = state.answerSubmissionValidation.data;\n  const defaultAnswerOptionsVM = makeDefaultVM(question);\n  if (!answerValidation) return defaultAnswerOptionsVM;\n  const t = Object.entries(defaultAnswerOptionsVM).reduce((acc, _ref) => {\n    let [letter, {\n      label\n    }] = _ref;\n    const answerOptionsVM = markGivenAnswerAsWrongByDefault(acc, letter, label, answerValidation);\n    return markGoodAnswer(answerOptionsVM, question, answerValidation);\n  }, {});\n  console.log(t);\n  return t;\n};\nconst makeDefaultVM = question => Object.entries(question.answersOptions).reduce((acc, _ref2) => {\n  let [letter, label] = _ref2;\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: \"NONE\"\n    }\n  };\n}, {});\nconst markGivenAnswerAsWrongByDefault = (acc, letter, label, answerValidation) => {\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: answerValidation.given === letter ? \"WRONG\" : \"NONE\"\n    }\n  };\n};\nconst markGoodAnswer = (answerOptionsVM, question, answerValidation) => ({\n  ...answerOptionsVM,\n  [answerValidation.correct]: {\n    label: question.answersOptions[answerValidation.correct],\n    highlightStatus: \"RIGHT\"\n  }\n});","map":{"version":3,"names":["selectAnswers","state","question","currentQuestionRetrieval","data","answerValidation","answerSubmissionValidation","defaultAnswerOptionsVM","makeDefaultVM","t","Object","entries","reduce","acc","letter","label","answerOptionsVM","markGivenAnswerAsWrongByDefault","markGoodAnswer","console","log","answersOptions","highlightStatus","given","correct"],"sources":["/Users/nhelie-treezor/dev/tdd-cleanarchi-web-15-fevrier-2023/src/who-wants-to-be-millionaire/adapters/primary/react/selectors/answers/answers.selector.ts"],"sourcesContent":["import { AppState } from \"../../../../../store/appState\";\nimport { AnswerOptionsVM } from \"./answerOptionsVM\";\nimport { Question } from \"../../../../../core-logic/usecases/current-question-retrieval/question\";\nimport { AnswerSubmissionValidation } from \"../../../../../core-logic/usecases/answer-submission/answerSubmissionValidation\";\n\nexport const selectAnswers = (state: AppState) => {\n  const question = state.currentQuestionRetrieval.data!;\n  const answerValidation = state.answerSubmissionValidation.data;\n  const defaultAnswerOptionsVM = makeDefaultVM(question);\n  if (!answerValidation) return defaultAnswerOptionsVM;\n  const t = Object.entries(defaultAnswerOptionsVM).reduce(\n    (acc, [letter, { label }]) => {\n      const answerOptionsVM = markGivenAnswerAsWrongByDefault(\n        acc,\n        letter,\n        label,\n        answerValidation\n      );\n      return markGoodAnswer(answerOptionsVM, question, answerValidation);\n    },\n    {} as AnswerOptionsVM\n  );\n  console.log(t);\n  return t;\n};\n\nconst makeDefaultVM = (question: Question) =>\n  Object.entries(question.answersOptions).reduce((acc, [letter, label]) => {\n    return {\n      ...acc,\n      [letter]: {\n        label,\n        highlightStatus: \"NONE\",\n      },\n    };\n  }, {} as AnswerOptionsVM);\n\nconst markGivenAnswerAsWrongByDefault = (\n  acc: AnswerOptionsVM,\n  letter: string,\n  label: string,\n  answerValidation: AnswerSubmissionValidation\n) => {\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: answerValidation.given === letter ? \"WRONG\" : \"NONE\",\n    },\n  };\n};\n\nconst markGoodAnswer = (\n  answerOptionsVM: AnswerOptionsVM,\n  question: Question,\n  answerValidation: AnswerSubmissionValidation\n) => ({\n  ...answerOptionsVM,\n  [answerValidation.correct]: {\n    label: question.answersOptions[answerValidation.correct],\n    highlightStatus: \"RIGHT\",\n  },\n});\n"],"mappings":"AAKA,OAAO,MAAMA,aAAa,GAAIC,KAAe,IAAK;EAChD,MAAMC,QAAQ,GAAGD,KAAK,CAACE,wBAAwB,CAACC,IAAK;EACrD,MAAMC,gBAAgB,GAAGJ,KAAK,CAACK,0BAA0B,CAACF,IAAI;EAC9D,MAAMG,sBAAsB,GAAGC,aAAa,CAACN,QAAQ,CAAC;EACtD,IAAI,CAACG,gBAAgB,EAAE,OAAOE,sBAAsB;EACpD,MAAME,CAAC,GAAGC,MAAM,CAACC,OAAO,CAACJ,sBAAsB,CAAC,CAACK,MAAM,CACrD,CAACC,GAAG,WAA0B;IAAA,IAAxB,CAACC,MAAM,EAAE;MAAEC;IAAM,CAAC,CAAC;IACvB,MAAMC,eAAe,GAAGC,+BAA+B,CACrDJ,GAAG,EACHC,MAAM,EACNC,KAAK,EACLV,gBAAgB,CACjB;IACD,OAAOa,cAAc,CAACF,eAAe,EAAEd,QAAQ,EAAEG,gBAAgB,CAAC;EACpE,CAAC,EACD,CAAC,CAAC,CACH;EACDc,OAAO,CAACC,GAAG,CAACX,CAAC,CAAC;EACd,OAAOA,CAAC;AACV,CAAC;AAED,MAAMD,aAAa,GAAIN,QAAkB,IACvCQ,MAAM,CAACC,OAAO,CAACT,QAAQ,CAACmB,cAAc,CAAC,CAACT,MAAM,CAAC,CAACC,GAAG,YAAsB;EAAA,IAApB,CAACC,MAAM,EAAEC,KAAK,CAAC;EAClE,OAAO;IACL,GAAGF,GAAG;IACN,CAACC,MAAM,GAAG;MACRC,KAAK;MACLO,eAAe,EAAE;IACnB;EACF,CAAC;AACH,CAAC,EAAE,CAAC,CAAC,CAAoB;AAE3B,MAAML,+BAA+B,GAAG,CACtCJ,GAAoB,EACpBC,MAAc,EACdC,KAAa,EACbV,gBAA4C,KACzC;EACH,OAAO;IACL,GAAGQ,GAAG;IACN,CAACC,MAAM,GAAG;MACRC,KAAK;MACLO,eAAe,EAAEjB,gBAAgB,CAACkB,KAAK,KAAKT,MAAM,GAAG,OAAO,GAAG;IACjE;EACF,CAAC;AACH,CAAC;AAED,MAAMI,cAAc,GAAG,CACrBF,eAAgC,EAChCd,QAAkB,EAClBG,gBAA4C,MACxC;EACJ,GAAGW,eAAe;EAClB,CAACX,gBAAgB,CAACmB,OAAO,GAAG;IAC1BT,KAAK,EAAEb,QAAQ,CAACmB,cAAc,CAAChB,gBAAgB,CAACmB,OAAO,CAAC;IACxDF,eAAe,EAAE;EACnB;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}