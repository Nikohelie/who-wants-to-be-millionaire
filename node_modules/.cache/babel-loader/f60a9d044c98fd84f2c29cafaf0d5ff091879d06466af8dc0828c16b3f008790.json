{"ast":null,"code":"export const selectAnswers = state => {\n  const question = state.currentQuestionRetrieval.data;\n  if (!question) return null;\n  const answerValidation = state.answerSubmissionValidation.data;\n  const defaultAnswerOptionsVM = makeDefaultVM(question);\n  if (!answerValidation) return defaultAnswerOptionsVM;\n  const answerOptionsVM = Object.entries(defaultAnswerOptionsVM).reduce((acc, _ref) => {\n    let [letter, {\n      label\n    }] = _ref;\n    return markGivenAnswerAsWrongByDefault(acc, letter, label, answerValidation);\n  }, {});\n  return markGoodAnswer(answerOptionsVM, question, answerValidation);\n};\nconst makeDefaultVM = question => Object.entries(question.answersOptions).reduce((acc, _ref2) => {\n  let [letter, label] = _ref2;\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: \"NONE\"\n    }\n  };\n}, {});\nconst markGivenAnswerAsWrongByDefault = (acc, letter, label, answerValidation) => {\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: answerValidation.given === letter ? \"WRONG\" : \"NONE\"\n    }\n  };\n};\nconst markGoodAnswer = (answerOptionsVM, question, answerValidation) => {\n  return {\n    ...answerOptionsVM,\n    [answerValidation.correct]: {\n      label: question.answersOptions[answerValidation.correct],\n      highlightStatus: \"RIGHT\"\n    }\n  };\n};","map":{"version":3,"names":["selectAnswers","state","question","currentQuestionRetrieval","data","answerValidation","answerSubmissionValidation","defaultAnswerOptionsVM","makeDefaultVM","answerOptionsVM","Object","entries","reduce","acc","letter","label","markGivenAnswerAsWrongByDefault","markGoodAnswer","answersOptions","highlightStatus","given","correct"],"sources":["/Users/nhelie-treezor/dev/tdd-cleanarchi-web-15-fevrier-2023/src/who-wants-to-be-millionaire/adapters/primary/react/selectors/answers/answers.selector.ts"],"sourcesContent":["import { AppState } from \"../../../../../store/appState\";\nimport { AnswerOptionsVM } from \"./answerOptionsVM\";\nimport { Question } from \"../../../../../core-logic/usecases/current-question-retrieval/question\";\nimport { AnswerSubmissionValidation } from \"../../../../../core-logic/usecases/answer-submission/answerSubmissionValidation\";\n\nexport const selectAnswers = (state: AppState): AnswerOptionsVM | null => {\n  const question = state.currentQuestionRetrieval.data!;\n  if (!question) return null;\n  const answerValidation = state.answerSubmissionValidation.data;\n  const defaultAnswerOptionsVM = makeDefaultVM(question);\n  if (!answerValidation) return defaultAnswerOptionsVM;\n  const answerOptionsVM = Object.entries(defaultAnswerOptionsVM).reduce(\n    (acc, [letter, { label }]) => {\n      return markGivenAnswerAsWrongByDefault(\n        acc,\n        letter,\n        label,\n        answerValidation\n      );\n    },\n    {} as AnswerOptionsVM\n  );\n  return markGoodAnswer(answerOptionsVM, question, answerValidation);\n};\n\nconst makeDefaultVM = (question: Question) =>\n  Object.entries(question.answersOptions).reduce((acc, [letter, label]) => {\n    return {\n      ...acc,\n      [letter]: {\n        label,\n        highlightStatus: \"NONE\",\n      },\n    };\n  }, {} as AnswerOptionsVM);\n\nconst markGivenAnswerAsWrongByDefault = (\n  acc: AnswerOptionsVM,\n  letter: string,\n  label: string,\n  answerValidation: AnswerSubmissionValidation\n) => {\n  return {\n    ...acc,\n    [letter]: {\n      label,\n      highlightStatus: answerValidation.given === letter ? \"WRONG\" : \"NONE\",\n    },\n  };\n};\n\nconst markGoodAnswer = (\n  answerOptionsVM: AnswerOptionsVM,\n  question: Question,\n  answerValidation: AnswerSubmissionValidation\n) => {\n  return {\n    ...answerOptionsVM,\n    [answerValidation.correct]: {\n      label: question.answersOptions[answerValidation.correct],\n      highlightStatus: \"RIGHT\",\n    },\n  };\n};\n"],"mappings":"AAKA,OAAO,MAAMA,aAAa,GAAIC,KAAe,IAA6B;EACxE,MAAMC,QAAQ,GAAGD,KAAK,CAACE,wBAAwB,CAACC,IAAK;EACrD,IAAI,CAACF,QAAQ,EAAE,OAAO,IAAI;EAC1B,MAAMG,gBAAgB,GAAGJ,KAAK,CAACK,0BAA0B,CAACF,IAAI;EAC9D,MAAMG,sBAAsB,GAAGC,aAAa,CAACN,QAAQ,CAAC;EACtD,IAAI,CAACG,gBAAgB,EAAE,OAAOE,sBAAsB;EACpD,MAAME,eAAe,GAAGC,MAAM,CAACC,OAAO,CAACJ,sBAAsB,CAAC,CAACK,MAAM,CACnE,CAACC,GAAG,WAA0B;IAAA,IAAxB,CAACC,MAAM,EAAE;MAAEC;IAAM,CAAC,CAAC;IACvB,OAAOC,+BAA+B,CACpCH,GAAG,EACHC,MAAM,EACNC,KAAK,EACLV,gBAAgB,CACjB;EACH,CAAC,EACD,CAAC,CAAC,CACH;EACD,OAAOY,cAAc,CAACR,eAAe,EAAEP,QAAQ,EAAEG,gBAAgB,CAAC;AACpE,CAAC;AAED,MAAMG,aAAa,GAAIN,QAAkB,IACvCQ,MAAM,CAACC,OAAO,CAACT,QAAQ,CAACgB,cAAc,CAAC,CAACN,MAAM,CAAC,CAACC,GAAG,YAAsB;EAAA,IAApB,CAACC,MAAM,EAAEC,KAAK,CAAC;EAClE,OAAO;IACL,GAAGF,GAAG;IACN,CAACC,MAAM,GAAG;MACRC,KAAK;MACLI,eAAe,EAAE;IACnB;EACF,CAAC;AACH,CAAC,EAAE,CAAC,CAAC,CAAoB;AAE3B,MAAMH,+BAA+B,GAAG,CACtCH,GAAoB,EACpBC,MAAc,EACdC,KAAa,EACbV,gBAA4C,KACzC;EACH,OAAO;IACL,GAAGQ,GAAG;IACN,CAACC,MAAM,GAAG;MACRC,KAAK;MACLI,eAAe,EAAEd,gBAAgB,CAACe,KAAK,KAAKN,MAAM,GAAG,OAAO,GAAG;IACjE;EACF,CAAC;AACH,CAAC;AAED,MAAMG,cAAc,GAAG,CACrBR,eAAgC,EAChCP,QAAkB,EAClBG,gBAA4C,KACzC;EACH,OAAO;IACL,GAAGI,eAAe;IAClB,CAACJ,gBAAgB,CAACgB,OAAO,GAAG;MAC1BN,KAAK,EAAEb,QAAQ,CAACgB,cAAc,CAACb,gBAAgB,CAACgB,OAAO,CAAC;MACxDF,eAAe,EAAE;IACnB;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}